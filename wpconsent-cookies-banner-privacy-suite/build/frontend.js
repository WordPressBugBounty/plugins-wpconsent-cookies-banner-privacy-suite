(()=>{var e={799:()=>{window.WPConsent={acceptAll:function(){this.savePreferences({essential:!0,statistics:!0,marketing:!0}),this.closePreferences()},savePreferences:function(e){const t=this.getCookie("wpconsent_preferences");this.setCookie("wpconsent_preferences",JSON.stringify(e),wpconsent.consent_duration),this.hideBanner(),this.closePreferences(),this.unlockScripts(e);const n=this.shadowRoot?.querySelector("#wpconsent-consent-floating");n&&(n.style.display="block"),window.dispatchEvent(new CustomEvent("wpconsent_consent_saved",{detail:e})),t&&window.dispatchEvent(new CustomEvent("wpconsent_consent_updated",{detail:e}))},showPreferences:function(){const e=this.shadowRoot?.querySelector("#wpconsent-preferences-modal");if(e){e.style.display="flex",this.setupFocusTrap(e);const t=this.shadowRoot?.querySelector("#wpconsent-preferences-title");t&&setTimeout((()=>{t.focus({preventScroll:!0}),this.lastFocusedElement=t}),100)}},closePreferences:function(){const e=this.shadowRoot?.querySelector("#wpconsent-preferences-modal");e&&(e.style.display="none",this.removeFocusTrap(),this.previouslyFocusedElement&&(this.previouslyFocusedElement.focus({preventScroll:!0}),this.previouslyFocusedElement=null))},showBanner:function(){const e=this.shadowRoot?.querySelector("#wpconsent-banner-holder");e&&(e.classList.add("wpconsent-banner-visible"),this.setupFocusTrap(e),this.setInitialFocus(e))},hideBanner:function(){const e=this.shadowRoot?.querySelector("#wpconsent-banner-holder");e&&(e.classList.remove("wpconsent-banner-visible"),this.removeFocusTrap(),this.previouslyFocusedElement&&(this.previouslyFocusedElement.focus({preventScroll:!0}),this.previouslyFocusedElement=null))},setCookie:function(e,t,n){let s="";if(n>0){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),s="expires="+e.toUTCString()+";"}document.cookie=e+"="+t+";"+s+"path=/"},getCookie:function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);if(2===t.length)return t.pop().split(";").shift()},hasConsent:function(e){const t=this.getCookie("wpconsent_preferences");if(!t)return!1;try{const n=JSON.parse(t);return"essential"===e||!0===n[e]}catch(e){return console.error("Error parsing WPConsent preferences:",e),!1}},unlockScripts:function(e){document.querySelectorAll('script[type="text/plain"]').forEach((t=>{const n=t.getAttribute("data-wpconsent-category");if(e[n]){const e=document.createElement("script");t.getAttributeNames().forEach((n=>{"type"!==n&&e.setAttribute(n,t.getAttribute(n))}));const n=t.getAttribute("data-wpconsent-src");n?e.src=n:e.text=t.text,t.parentNode.replaceChild(e,t)}})),document.dispatchEvent(new CustomEvent("wpconsent_consent_processed",{detail:e}))},init:function(){document.getElementById("wpconsent-root");const e=document.getElementById("wpconsent-container"),t=document.getElementById("wpconsent-template");if(this.shadowRoot=e.shadowRoot,!this.shadowRoot){this.shadowRoot=e.attachShadow({mode:"open"});const n=t.content.cloneNode(!0);this.shadowRoot.appendChild(n),t.remove(),this.loadExternalCSS(),this.initializeEventListeners(),this.initializeKeyboardHandlers()}const n=this.getCookie("wpconsent_preferences");if(n){const e=JSON.parse(n);this.unlockScripts(e);const t=this.shadowRoot.querySelector("#wpconsent-consent-floating");t&&(t.style.display="block")}else this.showBanner()},loadExternalCSS:async function(){try{const e=`${wpconsent.css_url}?ver=${wpconsent.css_version}`,t=await fetch(e),n=await t.text(),s=document.createElement("style");s.textContent=n,this.shadowRoot.appendChild(s)}catch(e){console.error("Failed to load WPConsent styles:",e)}},initializeEventListeners:function(){this.shadowRoot.querySelectorAll(".wpconsent-accept-all").forEach((e=>e.addEventListener("click",(()=>this.acceptAll())))),this.shadowRoot.querySelector("#wpconsent-cancel-all")?.addEventListener("click",(()=>{this.savePreferences({essential:!0,statistics:!1,marketing:!1})})),this.shadowRoot.querySelector("#wpconsent-banner-close")?.addEventListener("click",(()=>this.hideBanner())),this.shadowRoot.querySelector("#wpconsent-preferences-all")?.addEventListener("click",(()=>this.showPreferences()));const e=this.shadowRoot.querySelector("#wpconsent-consent-floating");e&&e.addEventListener("click",(()=>this.showPreferences())),this.shadowRoot.querySelector(".wpconsent-save-preferences")?.addEventListener("click",(()=>{const e=this.shadowRoot.querySelectorAll('#wpconsent-preferences-modal input[type="checkbox"]'),t=Array.from(e).filter((e=>e.checked)).map((e=>e.value));this.savePreferences({essential:!0,statistics:t.includes("statistics"),marketing:t.includes("marketing")})})),this.shadowRoot.querySelector(".wpconsent-close-preferences")?.addEventListener("click",(()=>this.closePreferences()))},initializeKeyboardHandlers:function(){document.addEventListener("keydown",(e=>{"Tab"===e.key?this.handleTabKey(e):"Escape"===e.key&&this.handleEscapeKey(e)}))},handleEscapeKey:function(e){const t=this.shadowRoot?.querySelector("#wpconsent-preferences-modal"),n=this.shadowRoot?.querySelector("#wpconsent-banner-holder");t&&"flex"===t.style.display?this.closePreferences():n&&n.classList.contains("wpconsent-banner-visible")&&this.hideBanner()},handleTabKey:function(e){const t=this.shadowRoot?.querySelector("#wpconsent-banner-holder"),n=this.shadowRoot?.querySelector("#wpconsent-preferences-modal"),s=t&&t.classList.contains("wpconsent-banner-visible"),o=n&&"flex"===n.style.display;if(!s&&!o)return;const c=o?n:t,i=this.getFocusableElements(c);if(0===i.length)return;e.preventDefault();const r=i[0],l=i[i.length-1];let a;this.lastFocusedElement&&i.includes(this.lastFocusedElement)?a=this.lastFocusedElement:(a=r,this.lastFocusedElement=a);const d=i.indexOf(a);let h;h=e.shiftKey?d<=0?l:i[d-1]:d>=i.length-1?r:i[d+1],h.focus({preventScroll:!0}),this.lastFocusedElement=h},setupFocusTrap:function(e){this.previouslyFocusedElement=document.activeElement,this.lastFocusedElement=null},removeFocusTrap:function(){this.lastFocusedElement=null},setInitialFocus:function(e){const t=this.getFocusableElements(e);t.length>0&&setTimeout((()=>{t[0].focus({preventScroll:!0}),this.lastFocusedElement=t[0]}),100)},getFocusableElements:function(e){return Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter((e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&!e.disabled}))},isElementInContainer:function(e,t){return!(!e||!t)&&(t.shadowRoot?t.shadowRoot.contains(e):t.contains(e))}},document.addEventListener("DOMContentLoaded",(()=>WPConsent.init()))}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var c=t[s]={exports:{}};return e[s](c,c.exports,n),c.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(799)})()})();